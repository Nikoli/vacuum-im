<script type="text/javascript">
var highlightActive = false;
function selectSender() {
	highlightActive = true;
	var node = event.target;
	var senderName = null;
	while (!senderName) {
		var nodeClass = node.className;
		if (nodeClass.indexOf("message") >= 0 && nodeClass.indexOf("xxxmessage") == -1) {
			var parts = nodeClass.split(" ");
			senderName = parts[parts.length - 1];
		}
		node = node.parentElement;
	}
	var elms = document.getElementsByClassName(senderName);
	var len = elms.length;
	for(var i = 0; i < len; i++) { 
		elms[i].className += ' xxxhover';
	} 
}
function deselectAll() {
	if (!highlightActive)
		return;
	var elms = document.querySelectorAll(".xxxhover");
	var len = elms.length;
	var elm = null;
	for(var i = 0; i < len; i++) { 
		elm = elms[i];
		elm.className = elm.className.replace(' xxxhover', ''); 
	}
	highlightActive = false;
}
document.body.addEventListener("mousedown", selectSender, false);
document.body.addEventListener("mouseup", deselectAll, false);
document.body.addEventListener("mouseout", deselectAll, false);
</script>

